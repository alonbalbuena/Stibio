{"version":3,"file":"SearchBox.js","sourceRoot":"","sources":["../../src/components/SearchBox.ts"],"names":[],"mappings":"AAKA,MAAM,CAAC,OAAO,OAAO,SAAU,SAAQ,eAAe;IAGpD;QACE,KAAK,EAAE,CAAC;QAHV,kBAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC;QAIlE,IAAI,CAAC,SAAS,GAAG;;;2DAGsC,CAAC;IAC1D,CAAC;IACD,iBAAiB;QAEf,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;IAClD,CAAC;IAED,SAAS;QACP,OAAO,GAAS,EAAE;YAChB,KAAK,MAAM,CAAC,8BAA8B,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;gBAC1D,MAAM,QAAQ,GAAG,IAAI,MAAM,CAAC,OAAO,EAAE,CAAC;gBACtC,MAAM,KAAK,GAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAsB,CAAC,KAAK,CAAC;gBAC3D,KAAK,QAAQ;qBACV,OAAO,CAAC,KAAK,CAAC;qBACd,IAAI,CAAC,CAAC,OAAoB,EAAE,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;YAC7D,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;IACJ,CAAC;IAED,cAAc,CAAC,OAAgB,EAAE,aAA+B;QAC9D,OAAO,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,EAAE;YACzB,MAAM,CAAC,WAAW;gBAChB,aAAa,CAAC,MAAM,CAAC,QAAQ;oBAC7B,aAAa,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;oBACpC,MAAM,CAAC,WAAW,CAAC;QACvB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,SAAS,CAAC,QAGT;QACC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,EAAE,QAAQ,CAAC,aAAa,CAAC,CAAC;QAGrE,KAAK,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;YACzC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;QACzE,CAAC,CAAC,CAAC;IACL,CAAC;CACF;AAED,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,YAAY,EAAE,SAAS,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC","sourcesContent":["import APIResponse from \"../models/APIResponse.js\";\nimport Movie from \"../models/Movie.js\";\nimport APIConfiguration from \"../models/APIConfiguration.js\";\nimport APISearch from \"../models/APISearch.js\";\n\nexport default class SearchBox extends HTMLFormElement {\n  moviesSection = document.querySelector(\".content\") ?? document.body;\n\n  constructor() {\n    super();\n    this.innerHTML = `\n    <link rel=\"stylesheet\" href=\"./public/styles/search-box.css\">\n    <primary-input ></primary-input >\n    <primary-button class=\"button\"> Send </primary-button>`;\n  }\n  connectedCallback(): void {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    this.addEventListener(\"submit\", this.getMovies);\n  }\n\n  getMovies(): () => void {\n    return (): void => {\n      void import(\"../services/SearchService.js\").then((module) => {\n        const servicio = new module.default();\n        const query = (this.elements[0] as HTMLInputElement).value;\n        void servicio\n          .request(query)\n          .then((results: APIResponse) => this.setMovies(results));\n      });\n    };\n  }\n\n  buildUrlImages(results: Movie[], configuration: APIConfiguration): void {\n    results.forEach((result) => {\n      result.poster_path =\n        configuration.images.base_url +\n        configuration.images.poster_sizes[1] +\n        result.poster_path;\n    });\n  }\n\n  setMovies(response: {\n    configuration: APIConfiguration;\n    search: APISearch;\n  }): void {\n    this.buildUrlImages(response.search.results, response.configuration);\n\n    //dynamic import for movies component\n    void import(\"./Movies.js\").then((module) => {\n      this.moviesSection.append(new module.default(response.search.results));\n    });\n  }\n}\n\nwindow.customElements.define(\"search-box\", SearchBox, { extends: \"form\" });\n"]}