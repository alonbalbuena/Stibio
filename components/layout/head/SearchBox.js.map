{"version":3,"file":"SearchBox.js","sourceRoot":"","sources":["../../../../src/components/layout/head/SearchBox.ts"],"names":[],"mappings":"AAIA,OAAO,cAAc,MAAM,6BAA6B,CAAC;AAEzD,MAAM,CAAC,OAAO,OAAO,SAAU,SAAQ,cAAc;IACnD,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC;IAEpE;QACE,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG;;;2DAGsC,CAAC;IAC1D,CAAC;IACD,iBAAiB;QACf,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,EAAE,gBAAgB,CAAC,OAAO,EAAE,GAAG,EAAE,CAClE,IAAI,CAAC,SAAS,EAAE,CACjB,CAAC;QACF,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,EAAE,gBAAgB,CACnD,OAAO,EACP,CAAC,KAAY,EAAE,EAAE;YACf,IAAK,KAAuB,CAAC,GAAG,KAAK,OAAO,EAAE;gBAC5C,IAAI,CAAC,SAAS,EAAE,CAAC;aAClB;QACH,CAAC,CACF,CAAC;QACF,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,EAAE,gBAAgB,CAAC,OAAO,EAAE,GAAG,EAAE,CACnE,IAAI,CAAC,SAAS,EAAE,CACjB,CAAC;IACJ,CAAC;IAED,SAAS;QACP,OAAO,GAAS,EAAE;YAChB,KAAK,MAAM,CAAC,oCAAoC,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;gBAChE,MAAM,QAAQ,GAAG,IAAI,MAAM,CAAC,OAAO,EAAE,CAAC;gBACtC,MAAM,KAAK,GAAI,IAAI,CAAC,aAAa,CAAC,eAAe,CAAsB;qBACpE,KAAK,CAAC;gBACT,KAAK,QAAQ;qBACV,OAAO,CAAC,KAAK,CAAC;qBACd,IAAI,CAAC,CAAC,OAAoB,EAAE,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;YAC7D,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;IACJ,CAAC;IAED,cAAc,CAAC,OAAgB,EAAE,aAA+B;QAC9D,OAAO,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,EAAE;YACzB,MAAM,CAAC,WAAW;gBAChB,aAAa,CAAC,MAAM,CAAC,QAAQ;oBAC7B,aAAa,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;oBACpC,MAAM,CAAC,WAAW,CAAC;QACvB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,SAAS,CAAC,QAGT;QACC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,EAAE,QAAQ,CAAC,aAAa,CAAC,CAAC;QAGrE,KAAK,MAAM,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;YAC1C,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;QACzE,CAAC,CAAC,CAAC;IACL,CAAC;CACF;AAED,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC","sourcesContent":["import APIResponse from \"../../../models/APIResponse.js\";\r\nimport Movie from \"../../../models/Movie.js\";\r\nimport APIConfiguration from \"../../../models/APIConfiguration.js\";\r\nimport APISearch from \"../../../models/APISearch.js\";\r\nimport LightComponent from \"../../lib/LightComponent.js\";\r\n\r\nexport default class SearchBox extends LightComponent {\r\n  moviesSection = document.querySelector(\".content\") ?? document.body;\r\n\r\n  constructor() {\r\n    super();\r\n    this.innerHTML = `\r\n    <link rel=\"stylesheet\" href=\"./public/styles/search-box.css\">\r\n    <primary-input ></primary-input >\r\n    <primary-button class=\"button\"> Send </primary-button>`;\r\n  }\r\n  connectedCallback(): void {\r\n    this.querySelector(\"primary-input\")?.addEventListener(\"click\", () =>\r\n      this.getMovies()\r\n    );\r\n    this.querySelector(\"primary-input\")?.addEventListener(\r\n      \"keyup\",\r\n      (event: Event) => {\r\n        if ((event as KeyboardEvent).key === \"Enter\") {\r\n          this.getMovies();\r\n        }\r\n      }\r\n    );\r\n    this.querySelector(\"primary-button\")?.addEventListener(\"click\", () =>\r\n      this.getMovies()\r\n    );\r\n  }\r\n\r\n  getMovies(): () => void {\r\n    return (): void => {\r\n      void import(\"../../../services/SearchService.js\").then((module) => {\r\n        const servicio = new module.default();\r\n        const query = (this.querySelector(\"primary-input\") as HTMLInputElement)\r\n          .value;\r\n        void servicio\r\n          .request(query)\r\n          .then((results: APIResponse) => this.setMovies(results));\r\n      });\r\n    };\r\n  }\r\n\r\n  buildUrlImages(results: Movie[], configuration: APIConfiguration): void {\r\n    results.forEach((result) => {\r\n      result.poster_path =\r\n        configuration.images.base_url +\r\n        configuration.images.poster_sizes[1] +\r\n        result.poster_path;\r\n    });\r\n  }\r\n\r\n  setMovies(response: {\r\n    configuration: APIConfiguration;\r\n    search: APISearch;\r\n  }): void {\r\n    this.buildUrlImages(response.search.results, response.configuration);\r\n\r\n    //dynamic import for movies component\r\n    void import(\"../Movies.js\").then((module) => {\r\n      this.moviesSection.append(new module.default(response.search.results));\r\n    });\r\n  }\r\n}\r\n\r\nwindow.customElements.define(\"search-box\", SearchBox);\r\n"]}