{"version":3,"file":"SearchBox.js","sourceRoot":"","sources":["../../../../src/components/layout/head/SearchBox.ts"],"names":[],"mappings":"AAIA,OAAO,cAAc,MAAM,6BAA6B,CAAC;AAEzD,MAAM,CAAC,OAAO,OAAO,SAAU,SAAQ,cAAc;IACnD,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC;IAEpE;QACE,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG;;;2DAGsC,CAAC;IAC1D,CAAC;IACD,iBAAiB;QACf,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,EAAE,gBAAgB,CAAC,OAAO,EAAE,GAAG,EAAE,CAClE,IAAI,CAAC,SAAS,EAAE,CACjB,CAAC;QACF,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,EAAE,gBAAgB,CACnD,OAAO,EACP,CAAC,KAAY,EAAE,EAAE;YACf,IAAK,KAAuB,CAAC,GAAG,KAAK,OAAO,EAAE;gBAC5C,IAAI,CAAC,SAAS,EAAE,CAAC;aAClB;QACH,CAAC,CACF,CAAC;QACF,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,EAAE,gBAAgB,CAAC,OAAO,EAAE,GAAG,EAAE,CACnE,IAAI,CAAC,SAAS,EAAE,CACjB,CAAC;IACJ,CAAC;IAED,SAAS;QACP,OAAO,GAAS,EAAE;YAChB,KAAK,MAAM,CAAC,oCAAoC,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;gBAChE,MAAM,QAAQ,GAAG,IAAI,MAAM,CAAC,OAAO,EAAE,CAAC;gBACtC,MAAM,KAAK,GAAI,IAAI,CAAC,aAAa,CAAC,eAAe,CAAsB;qBACpE,KAAK,CAAC;gBACT,KAAK,QAAQ;qBACV,OAAO,CAAC,KAAK,CAAC;qBACd,IAAI,CAAC,CAAC,OAAoB,EAAE,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;YAC7D,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;IACJ,CAAC;IAED,cAAc,CAAC,OAAgB,EAAE,aAA+B;QAC9D,OAAO,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,EAAE;YACzB,MAAM,CAAC,WAAW;gBAChB,aAAa,CAAC,MAAM,CAAC,QAAQ;oBAC7B,aAAa,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;oBACpC,MAAM,CAAC,WAAW,CAAC;QACvB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,SAAS,CAAC,QAGT;QACC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,EAAE,QAAQ,CAAC,aAAa,CAAC,CAAC;QAGrE,KAAK,MAAM,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;YAC1C,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;QACzE,CAAC,CAAC,CAAC;IACL,CAAC;CACF;AAED,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC","sourcesContent":["import APIResponse from \"../../../models/APIResponse.js\";\nimport Movie from \"../../../models/Movie.js\";\nimport APIConfiguration from \"../../../models/APIConfiguration.js\";\nimport APISearch from \"../../../models/APISearch.js\";\nimport LightComponent from \"../../lib/LightComponent.js\";\n\nexport default class SearchBox extends LightComponent {\n  moviesSection = document.querySelector(\".content\") ?? document.body;\n\n  constructor() {\n    super();\n    this.innerHTML = `\n    <link rel=\"stylesheet\" href=\"./public/styles/search-box.css\">\n    <primary-input ></primary-input >\n    <primary-button class=\"button\"> Send </primary-button>`;\n  }\n  connectedCallback(): void {\n    this.querySelector(\"primary-input\")?.addEventListener(\"click\", () =>\n      this.getMovies()\n    );\n    this.querySelector(\"primary-input\")?.addEventListener(\n      \"keyup\",\n      (event: Event) => {\n        if ((event as KeyboardEvent).key === \"Enter\") {\n          this.getMovies();\n        }\n      }\n    );\n    this.querySelector(\"primary-button\")?.addEventListener(\"click\", () =>\n      this.getMovies()\n    );\n  }\n\n  getMovies(): () => void {\n    return (): void => {\n      void import(\"../../../services/SearchService.js\").then((module) => {\n        const servicio = new module.default();\n        const query = (this.querySelector(\"primary-input\") as HTMLInputElement)\n          .value;\n        void servicio\n          .request(query)\n          .then((results: APIResponse) => this.setMovies(results));\n      });\n    };\n  }\n\n  buildUrlImages(results: Movie[], configuration: APIConfiguration): void {\n    results.forEach((result) => {\n      result.poster_path =\n        configuration.images.base_url +\n        configuration.images.poster_sizes[1] +\n        result.poster_path;\n    });\n  }\n\n  setMovies(response: {\n    configuration: APIConfiguration;\n    search: APISearch;\n  }): void {\n    this.buildUrlImages(response.search.results, response.configuration);\n\n    //dynamic import for movies component\n    void import(\"../Movies.js\").then((module) => {\n      this.moviesSection.append(new module.default(response.search.results));\n    });\n  }\n}\n\nwindow.customElements.define(\"search-box\", SearchBox);\n"]}